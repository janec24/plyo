{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/jane_c24/Documents/Projects/plyo/frontend/src/ExerciseDisplay.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport Exercises from './Exercises';\nimport Progress from './Progress';\nimport { useEffect } from 'react';\nimport React from 'react';\n\nconst ExerciseDisplay = ({\n  num,\n  focus,\n  level,\n  time,\n  sets,\n  challengeMode,\n  challengeModeOff\n}) => {\n  _s();\n\n  const myRef = /*#__PURE__*/React.createRef();\n  const [exercises, setExercises] = useState(null);\n  const [exerciseBank, setExerciseBank] = useState(null); //create newTime variable here that changes when we submit form\n\n  const [newTime, setNewTime] = useState(null);\n  const [newSets, setNewSets] = useState(null);\n  const [setCounter, setSetCounter] = useState(1);\n  const [currNum, setCurrNum] = useState(5);\n  var newExercises = [];\n  const [allCurrentExercises, setAllCurrentExercises] = useState(null); //onload, exercises are not displayed\n\n  const [showResults, setShowResults] = useState(false); //fetch data from backend on load\n\n  useEffect(() => {\n    fetch('http://127.0.0.1:8000/api/workout/').then(res => {\n      return res.json();\n    }).then(data => {\n      console.log(data);\n      setExerciseBank(data);\n    });\n  }, []);\n  useEffect(() => {\n    if (challengeMode) {\n      changeDisplay(4, 4, 'fullBody', 60, 5);\n    }\n  }, [challengeMode]); //once submit button is changed, exercises are loaded up based on given values\n\n  const changeDisplay = (num, level, focus, time, sets) => {\n    setNewTime(time);\n    setNewSets(sets);\n    setCurrNum(num);\n    setSetCounter(1);\n    challengeModeOff();\n    console.log(\"Changing exercise list to: \" + num + level + focus + newTime + \"s\"); //first button click reveals this group of components \n\n    setShowResults(true); //scroll to exercises when button is clicked\n\n    window.scrollTo(0, myRef.current.offsetTop);\n    var focusID = null;\n    /*if (focus === 'upper'){\n        focusID = 1\n    }*/\n\n    if (focus === 'legs') {\n      focusID = 2;\n    }\n\n    if (focus === 'cardio') {\n      focusID = 3;\n    }\n\n    if (focus === 'abs') {\n      focusID = 4;\n    } // filtering based on focus - dont need to filter if full body\n\n\n    var newExerciseBank = exerciseBank;\n\n    if (focus !== 'fullBody') {\n      newExerciseBank = exerciseBank.filter(exercise => exercise.focus === focusID);\n    }\n\n    if (level === 4) {\n      newExerciseBank = newExerciseBank.filter(exercise => exercise.level = 3);\n    } //don't need to filter level if abs, otherwise we do filter \n    else if (focus !== 'abs') {\n        newExerciseBank = newExerciseBank.filter(exercise => exercise.level <= level);\n      } //add the number of requested exercises (num) to new array\n\n\n    let added = new Map();\n\n    for (let i = 0; i < num; i++) {\n      let random = Math.floor(Math.random() * newExerciseBank.length);\n\n      if (newExerciseBank.length > num) {\n        while (added[random] === 1) {\n          random = Math.floor(Math.random() * newExerciseBank.length);\n        }\n      }\n\n      newExercises.push(newExerciseBank[random]);\n      added[random] = 1;\n    }\n\n    console.log(newExercises);\n    setExercises(newExercises);\n    setAllCurrentExercises(newExercises);\n  }; //pass the first exercise as current so that it can be deleted once completed\n\n\n  if (exercises != null) {\n    if (exercises.length > 0) {\n      var id = exercises[0].id;\n      var current = exercises[0];\n    } else {\n      var id = null;\n      var current = null;\n    }\n  }\n\n  const increaseSets = () => {\n    setSetCounter(setCounter + 1);\n  }; //called when the timer reaches 0 -> deletes the first exercise once completed, changes exercise state \n\n\n  const handleDelete = (id, numDone, allCurrentExercises) => {\n    console.log(\"count: \" + setCounter + \"total\" + sets);\n\n    if (id != null) {\n      const exercisesWithoutFirst = exercises.filter(exercise => exercise.id !== id);\n      setExercises(exercisesWithoutFirst);\n    }\n\n    if (numDone === currNum && setCounter < sets) {\n      setExercises(allCurrentExercises);\n      console.log(\"TESTING NEW SET RESET: \");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ExerciseDisplay\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"submitButton\",\n      onClick: () => changeDisplay(num, level, focus, time, sets),\n      children: \" Let's Go!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: myRef,\n      children: [\" \", showResults ? /*#__PURE__*/_jsxDEV(Progress, {\n        newTime: newTime,\n        id: id,\n        current: current,\n        handleDelete: handleDelete,\n        sets: newSets,\n        setCounter: setCounter,\n        currNum: currNum,\n        increaseSets: increaseSets,\n        allCurrentExercises: allCurrentExercises\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 46\n      }, this) : null, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \" \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }, this), exercises && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\" \", showResults ? /*#__PURE__*/_jsxDEV(Exercises, {\n        Exercises: exercises\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 47\n      }, this) : null, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 27\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ExerciseDisplay, \"Mm1S7Kdqgti0p7sbXFxAjOXmg3M=\");\n\n_c = ExerciseDisplay;\nexport default ExerciseDisplay;\n\nvar _c;\n\n$RefreshReg$(_c, \"ExerciseDisplay\");","map":{"version":3,"sources":["/Users/jane_c24/Documents/Projects/plyo/frontend/src/ExerciseDisplay.js"],"names":["useState","Exercises","Progress","useEffect","React","ExerciseDisplay","num","focus","level","time","sets","challengeMode","challengeModeOff","myRef","createRef","exercises","setExercises","exerciseBank","setExerciseBank","newTime","setNewTime","newSets","setNewSets","setCounter","setSetCounter","currNum","setCurrNum","newExercises","allCurrentExercises","setAllCurrentExercises","showResults","setShowResults","fetch","then","res","json","data","console","log","changeDisplay","window","scrollTo","current","offsetTop","focusID","newExerciseBank","filter","exercise","added","Map","i","random","Math","floor","length","push","id","increaseSets","handleDelete","numDone","exercisesWithoutFirst"],"mappings":"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","sourcesContent":["import {useState} from 'react';\nimport Exercises from './Exercises';\nimport Progress from './Progress';\nimport {useEffect} from 'react'\nimport React from 'react'\n\nconst ExerciseDisplay = ({num, focus, level, time, sets, challengeMode, challengeModeOff}) => {\n    const myRef = React.createRef()\n    const [exercises, setExercises] = useState(null)\n    const [exerciseBank, setExerciseBank] = useState(null)\n    //create newTime variable here that changes when we submit form\n    const [newTime, setNewTime] = useState(null)\n    const [newSets, setNewSets] = useState(null)\n    const [setCounter, setSetCounter] = useState(1)\n    const [currNum, setCurrNum] = useState(5)\n    var newExercises = []\n    const [allCurrentExercises, setAllCurrentExercises] = useState(null)\n     //onload, exercises are not displayed\n    const [showResults, setShowResults] = useState(false)\n    \n   //fetch data from backend on load\n   useEffect(()=> {\n       fetch('http://127.0.0.1:8000/api/workout/')\n        .then(res => {\n           return res.json();\n        })\n        .then(data => {\n            console.log(data)\n            setExerciseBank(data)\n        })\n   }, []);\n\n   useEffect(() => {\n       if (challengeMode){\n           changeDisplay(4, 4, 'fullBody', 60, 5)\n       }\n   }, [challengeMode])\n\n    //once submit button is changed, exercises are loaded up based on given values\n    const changeDisplay = (num, level, focus, time, sets) => {\n        setNewTime(time);\n        setNewSets(sets);\n        setCurrNum(num);\n        setSetCounter(1);\n        challengeModeOff();\n\n        console.log(\"Changing exercise list to: \" + num + level + focus + newTime + \"s\")\n        //first button click reveals this group of components \n        setShowResults(true)\n        \n        //scroll to exercises when button is clicked\n        window.scrollTo(0, myRef.current.offsetTop);\n\n        var focusID = null\n        /*if (focus === 'upper'){\n            focusID = 1\n        }*/\n        if (focus === 'legs'){\n            focusID = 2\n        }\n        if (focus === 'cardio'){\n            focusID = 3\n        }\n        if (focus === 'abs'){\n            focusID = 4\n        }\n        \n        // filtering based on focus - dont need to filter if full body\n        var newExerciseBank = exerciseBank\n        if (focus !== 'fullBody'){\n            newExerciseBank = exerciseBank.filter(exercise => exercise.focus === focusID)\n        }\n        if (level === 4) {\n            newExerciseBank = newExerciseBank.filter(exercise => exercise.level = 3);\n        }\n        //don't need to filter level if abs, otherwise we do filter \n        else if (focus!== 'abs'){\n            newExerciseBank = newExerciseBank.filter(exercise => exercise.level <= level)\n        }\n\n        //add the number of requested exercises (num) to new array\n        let added = new Map()\n        for (let i = 0; i<num; i++){\n            let random = Math.floor(Math.random()*newExerciseBank.length)\n            if (newExerciseBank.length > num) {\n                while (added[random] === 1){\n                random =Math.floor(Math.random()*newExerciseBank.length)\n                }\n            }\n            newExercises.push(newExerciseBank[random])\n            added[random] = 1\n            }\n        console.log(newExercises)\n        setExercises(newExercises);\n        setAllCurrentExercises(newExercises)\n    }\n\n    //pass the first exercise as current so that it can be deleted once completed\n    if (exercises != null){\n        if (exercises.length > 0){\n            var id = exercises[0].id;\n            var current = exercises[0]\n        }\n        else{\n            var id = null\n            var current = null\n        }\n    }\n\n    const increaseSets = ()=>{\n        setSetCounter(setCounter+1);\n    }\n\n     //called when the timer reaches 0 -> deletes the first exercise once completed, changes exercise state \n     const handleDelete = (id, numDone, allCurrentExercises) => {\n        console.log(\"count: \" + setCounter + \"total\" + sets)\n        if (id != null){\n            const exercisesWithoutFirst = exercises.filter(exercise => exercise.id !== id);\n            setExercises(exercisesWithoutFirst);\n        }\n        if (numDone === currNum && setCounter < sets){\n            setExercises(allCurrentExercises)\n            console.log(\"TESTING NEW SET RESET: \")\n        }\n    } \n\n    return(\n        <div className=\"ExerciseDisplay\">\n            <button className=\"submitButton\" onClick={()=> changeDisplay(num, level, focus, time, sets)}> Let's Go!</button>\n            <div ref={myRef}> {showResults ? <Progress newTime = {newTime} id={id} current={current} handleDelete={handleDelete} sets={newSets} setCounter={setCounter} currNum={currNum} increaseSets = {increaseSets} allCurrentExercises={allCurrentExercises}/> : null} </div>\n            <div> {/*showResults ? <h1> Num Exercises: {num} Focus: {focus} Level: {level} Time: {newTime}</h1> : null*/}</div>\n            {exercises && <div> {showResults? <Exercises Exercises = {exercises}/> : null} </div>}\n        </div>\n    );\n}\nexport default ExerciseDisplay;"]},"metadata":{},"sourceType":"module"}